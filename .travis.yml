language: ruby
rvm:
- 2.6.3
services:
- postgresql
before_script:
- psql -c 'create database blog_test;' -U postgres
script:
- bundle exec rails db:migrate RAILS_ENV=test
- bundle exec rspec
env:
- ENV['SORCERY_GITHUB_KEY'] = 'cd5cce5cecb001da9a3c'
- ENV['SORCERY_GITHUB_SECRET'] = "7ab53a32ea1e9b72bd4f5d1387b8c6cedf874ed2"
- ENV['SORCERY_GITHUB_CALLBACK_URL'] = "http://localhost:3000/oauth/callback?provider=github"